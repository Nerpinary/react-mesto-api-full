{"version":3,"sources":["components/Footer.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","utils/auth.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/success.svg","images/error.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Footer","className","Date","getFullYear","Header","props","to","path","exact","userEmail","onClick","onSignOut","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","src","link","alt","name","onCardDelete","type","onCardLike","length","Main","cards","onEditProfile","onAddPlace","onEditAvatar","onCardClick","avatar","about","map","item","PopupWithForm","isOpen","onSubmit","title","children","buttonName","onClose","EditAvatarPopup","avatarRef","useRef","useEffect","current","value","e","preventDefault","ref","id","required","placeholder","EditProfilePopup","useState","setName","description","setDescription","onEditUser","onChange","target","minLength","maxLength","AddPlacePopup","setLink","ImagePopup","api","url","token","this","_base_url","_token","fetch","headers","then","res","_check","method","body","JSON","stringify","data","cardId","ok","json","Promise","reject","status","authorization","auth","email","password","_handleResponse","localStorage","setItem","Login","userAuthorisation","setUserAuthorisation","handleChange","onLogin","Register","userRegistration","setUserRegistration","onRegister","ProtectedRoute","Component","component","isLoggedIn","InfoTooltip","isSuccess","success","error","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","isRegistrationSuccessful","setIsRegistrationSuccessful","isTooltipOpen","setIsTooltipOpen","history","useHistory","closeAllPopups","promises","getInfo","getInitialCards","all","userData","initialCards","catch","err","console","log","closeByEscape","key","document","addEventListener","removeEventListener","setUserEmail","getItem","onTokenCheck","setIsLoggedIn","checkToken","push","Provider","removeItem","register","finally","login","like","changeLikeCardStatus","newCard","cardList","c","deleteCard","filter","setInfo","addNewCard","avatarLink","setAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"gNAAe,SAASA,IACpB,OACI,wBAAQC,UAAU,SAAlB,SACI,oBAAGA,UAAU,oBAAb,6BAA4C,IAAIC,MAAOC,cAAvD,sB,kBCoBGC,MAnBf,SAAgBC,GAEZ,OACI,yBAAQJ,UAAU,SAAlB,UACI,cAAC,IAAD,CAAMA,UAAU,eAAeK,GAAG,MAClC,qBAAKL,UAAU,eAAf,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOM,KAAK,WAAZ,SAAuB,cAAC,IAAD,CAAMN,UAAU,eAAeK,GAAG,WAAlC,wCACvB,cAAC,IAAD,CAAOC,KAAK,WAAZ,SAAuB,cAAC,IAAD,CAAMN,UAAU,eAAeK,GAAG,WAAlC,kFACvB,eAAC,IAAD,CAAOE,OAAK,EAACD,KAAK,IAAlB,UACI,mBAAGN,UAAU,gBAAb,SAA8BI,EAAMI,YACpC,wBAAQR,UAAU,eAAeS,QAASL,EAAMM,UAAhD,wDCbXC,EAAqBC,IAAMC,gBCuCzBC,MAtCf,SAAcV,GACZ,IAAMW,EAAcH,IAAMI,WAAWL,GAC/BM,EAAQb,EAAMc,KAAKC,MAAMC,MAAQL,EAAYK,IAC7CC,EAAyB,+BAC7BJ,EAAQ,uBAAyB,+BAE7BK,EAAUlB,EAAMc,KAAKK,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEL,MAAQL,EAAYK,OAC7DM,EAAuB,sBAC3BJ,EAAU,6BAA+B,eAe3C,OACE,qBAAItB,UAAU,QAAd,UACE,qBAAKS,QAdT,WACEL,EAAMK,QAAQL,EAAMc,OAaaS,IAAKvB,EAAMc,KAAKU,KAAM5B,UAAU,eAAe6B,IAAKzB,EAAMc,KAAKY,OAC9F,wBAAQrB,QAPZ,WACEL,EAAM2B,aAAa3B,EAAMc,OAMalB,UAAWqB,EAA2BW,KAAK,WAC/E,sBAAKhC,UAAU,cAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BI,EAAMc,KAAKY,OACxC,sBAAK9B,UAAU,eAAf,UACE,wBAAQS,QAfhB,WACEL,EAAM6B,WAAW7B,EAAMc,OAciBlB,UAAW0B,EAAyBM,KAAK,WAC3E,sBAAMhC,UAAU,oBAAhB,SAAqCI,EAAMc,KAAKK,MAAMW,mBC7BjD,SAASC,EAAT,GAAwG,IAAzFC,EAAwF,EAAxFA,MAAOC,EAAiF,EAAjFA,cAAeC,EAAkE,EAAlEA,WAAYC,EAAsD,EAAtDA,aAAcC,EAAwC,EAAxCA,YAAaP,EAA2B,EAA3BA,WAAYF,EAAe,EAAfA,aAE7FhB,EAAcH,IAAMI,WAAWL,GAErC,OACI,uBAAMX,UAAU,UAAhB,UAEI,0BAASA,UAAU,UAAnB,UACA,sBAAKA,UAAU,uBAAf,UACI,qBAAKA,UAAU,sBAAf,SACA,wBAAQS,QAAS8B,EAAcvC,UAAU,8BAAzC,SAAuE,qBAAK2B,IAAKZ,EAAY0B,OAAQzC,UAAU,kBAAkB6B,IAAI,6CAErI,sBAAK7B,UAAU,gBAAf,UACA,sBAAKA,UAAU,uBAAf,UACI,oBAAIA,UAAU,gBAAd,SAA+Be,EAAYe,OAC3C,wBAAQrB,QAAS4B,EAAerC,UAAU,uBAAuBgC,KAAK,cAE1E,mBAAGhC,UAAU,eAAb,SAA6Be,EAAY2B,cAG7C,wBAAQjC,QAAS6B,EAAYtC,UAAU,sBAAsBgC,KAAK,cAGlE,yBAAShC,UAAU,SAAnB,SACA,oBAAIA,UAAU,eAAd,SACCoC,EAAMO,KAAI,SAACC,GAAD,OACP,cAAC,EAAD,CAEI1B,KAAM0B,EACNnC,QAAS+B,EACTP,WAAYA,EACZF,aAAcA,GAJTa,EAAKxB,eChCf,SAASyB,EAAczC,GAClC,OACI,qBAAKJ,UAAS,2BAAsBI,EAAM0B,KAA5B,YAAoC1B,EAAM0C,QAAU,gBAAlE,SACI,sBAAK9C,UAAU,mBAAf,UACA,uBAAM8B,KAAM1B,EAAM0B,KAAM9B,UAAU,mBAAmB+C,SAAU3C,EAAM2C,SAArE,UACI,oBAAI/C,UAAU,eAAd,SAA8BI,EAAM4C,QACnC5C,EAAM6C,SACP,wBAAQjB,KAAK,SAAShC,UAAU,mCAAhC,SAAoEI,EAAM8C,gBAE9E,wBAAQzC,QAASL,EAAM+C,QAASnB,KAAK,SAAShC,UAAU,6BC6BrDoD,MAnCf,SAAyBhD,GACvB,IAAMiD,EAAYzC,IAAM0C,SAWxB,OAJA1C,IAAM2C,WAAU,WACdF,EAAUG,QAAQC,MAAQ,KACzB,CAACrD,EAAM0C,SAGR,eAACD,EAAD,CACEf,KAAM,SACNkB,MAAO,wFACPE,WAAY,yDACZJ,OAAQ1C,EAAM0C,OACdK,QAAS/C,EAAM+C,QACfJ,SAhBJ,SAAsBW,GACpBA,EAAEC,iBACFvD,EAAMmC,aAAac,EAAUG,QAAQC,QAQrC,UAQE,uBACEG,IAAKP,EACLrB,KAAK,MACLF,KAAK,kBACL+B,GAAG,oBACHC,UAAQ,EACRC,YAAY,qGACZ/D,UAAU,+CAEZ,sBAAMA,UAAU,mDCqCPgE,MAlEf,SAA0B5D,GACxB,IAAMW,EAAcH,IAAMI,WAAWL,GACrC,EAAwBC,IAAMqD,SAAS,IAAvC,mBAAOnC,EAAP,KAAaoC,EAAb,KACA,EAAsCtD,IAAMqD,SAAS,IAArD,mBAAOE,EAAP,KAAoBC,EAApB,KAwBA,OAtBAxD,IAAM2C,WAAU,WACdW,EAAQnD,EAAYe,MACpBsC,EAAerD,EAAY2B,SAC1B,CAAC3B,EAAaX,EAAM0C,SAoBrB,eAACD,EAAD,CACEf,KAAM,OACNkB,MAAO,4HACPE,WAAY,yDACZJ,OAAQ1C,EAAM0C,OACdK,QAAS/C,EAAM+C,QACfJ,SAhBJ,SAAsBW,GACpBA,EAAEC,iBAEFvD,EAAMiE,WAAW,CACfvC,OACAY,MAAOyB,KAKT,UAQE,uBACEG,SA3BN,SAAuBZ,GACrBQ,EAAQR,EAAEa,OAAOd,QA2BbA,MAAO3B,GAAQ,GACfE,KAAK,OACLF,KAAK,YACL+B,GAAG,aACHC,UAAQ,EACRU,UAAU,IACVC,UAAU,KACVV,YAAY,qBACZ/D,UAAU,iBAEZ,sBAAMA,UAAU,wCAChB,uBACEsE,SApCN,SAA8BZ,GAC5BU,EAAeV,EAAEa,OAAOd,QAoCpBA,MAAOU,GAAe,GACtBnC,KAAK,OACLF,KAAK,WACL+B,GAAG,YACHC,UAAQ,EACRU,UAAU,IACVC,UAAU,MACVV,YAAY,8FACZ/D,UAAU,iBAEZ,sBAAMA,UAAU,2CCHP0E,MA3Df,SAAuBtE,GACrB,MAAwBQ,IAAMqD,SAAS,IAAvC,mBAAOnC,EAAP,KAAaoC,EAAb,KACA,EAAwBtD,IAAMqD,SAAS,IAAvC,mBAAOrC,EAAP,KAAa+C,EAAb,KAoBA,OALA/D,IAAM2C,WAAU,WACdW,EAAQ,IACRS,EAAQ,MACP,CAACvE,EAAM0C,SAGR,eAACD,EAAD,CACEf,KAAM,MACNkB,MAAO,gEACPE,WAAY,oDACZJ,OAAQ1C,EAAM0C,OACdK,QAAS/C,EAAM+C,QACfJ,SAjBJ,SAAsBW,GACpBA,EAAEC,iBACFvD,EAAMkC,WAAWR,EAAMF,IASvB,UAQE,uBACE0C,SA5BN,SAAuBZ,GACrBQ,EAAQR,EAAEa,OAAOd,QA4BbA,MAAO3B,GAAQ,GACfE,KAAK,OACLF,KAAK,aACL+B,GAAG,cACHW,UAAU,IACVC,UAAU,KACVX,UAAQ,EACRC,YAAY,mDACZ/D,UAAU,yCAEZ,sBAAMA,UAAU,uBAChB,uBACEsE,SArCN,SAAuBZ,GACrBiB,EAAQjB,EAAEa,OAAOd,QAqCbA,MAAO7B,GAAQ,GACfI,KAAK,MACLF,KAAK,YACL+B,GAAG,aACHC,UAAQ,EACRC,YAAY,qGACZ/D,UAAU,wCAEZ,sBAAMA,UAAU,2BCzDP,SAAS4E,EAAWxE,GAC/B,OACI,qBAAKJ,UAAS,2BAAsBI,EAAM0B,KAA5B,YAAoC1B,EAAM0C,QAAU,gBAAkBe,GAAG,aAAvF,SACI,sBAAK7D,UAAU,mBAAf,UACA,yBAAQA,UAAU,yBAAlB,UACI,qBAAKA,UAAU,eAAe6B,IAAKzB,EAAMc,KAAKY,KAAMH,IAAKvB,EAAMc,KAAKU,OACpE,4BAAY5B,UAAU,uBAAtB,SAA8CI,EAAMc,KAAKY,UAE7D,wBAAQrB,QAASL,EAAM+C,QAASnB,KAAK,SAAShC,UAAU,sBAAsB6D,GAAG,0B,oBCgF9EgB,EAPH,I,WA/EV,cAA2B,IAAdC,EAAa,EAAbA,IAAKC,EAAQ,EAARA,MAAQ,oBACxBC,KAAKC,UAAYH,EACjBE,KAAKE,OAASH,E,mDAGhB,WAAmB,IAAD,OAChB,OAAOI,MAAM,GAAD,OAAIH,KAAKC,UAAT,UAA4B,CACtCG,QAASJ,KAAKE,SAEfG,MAAK,SAACC,GAAD,OAAS,EAAKC,OAAOD,Q,wBAG7B,SAAWxD,EAAMF,GACf,OAAOuD,MAAM,GAAD,OAAIH,KAAKC,UAAT,UAA4B,CACtCO,OAAQ,OACRJ,QAASJ,KAAKE,OACdO,KAAMC,KAAKC,UAAU,CACnB7D,KAAMA,EACNF,KAAMA,MAGTyD,KAAKL,KAAKO,U,wBAGb,SAAWnE,GACT,OAAO+D,MAAM,GAAD,OAAIH,KAAKC,UAAT,kBAA4B7D,GAAO,CAC7CoE,OAAQ,SACRJ,QAASJ,KAAKE,SAEfG,KAAKL,KAAKO,U,qBAGb,WACE,OAAOJ,MAAM,GAAD,OAAIH,KAAKC,UAAT,aAA+B,CACzCO,OAAQ,MACRJ,QAASJ,KAAKE,SAEfG,KAAKL,KAAKO,U,qBAGb,SAAQK,GACN,OAAOT,MAAM,GAAD,OAAIH,KAAKC,UAAT,aAA+B,CACzCO,OAAQ,QACRJ,QAASJ,KAAKE,OACdO,KAAMC,KAAKC,UAAU,CACnB7D,KAAM8D,EAAK9D,KACXY,MAAOkD,EAAKlD,UAGf2C,KAAKL,KAAKO,U,uBAGb,SAAU3D,GACR,OAAOuD,MAAM,GAAD,OAAIH,KAAKC,UAAT,oBAAsC,CAChDO,OAAQ,QACRJ,QAASJ,KAAKE,OACdO,KAAMC,KAAKC,UAAU,CACnBlD,OAAQb,MAGXyD,KAAKL,KAAKO,U,kCAGb,SAAqBM,EAAQvE,GAC3B,OAAO6D,MAAM,GAAD,OAAIH,KAAKC,UAAT,wBAAkCY,GAAU,CACtDL,OAAQlE,EAAU,MAAQ,SAC1B8D,QAASJ,KAAKE,SAEfG,KAAKL,KAAKO,U,oBAGb,SAAOD,GACL,OAAIA,EAAIQ,GACCR,EAAIS,OAENC,QAAQC,OAAR,gDAA0BX,EAAIY,a,KAI7B,CAAQ,CAClBpB,IAAK,8CACLC,MAAO,CACLoB,cAAe,uCACf,eAAgB,sBCtBLC,EAJF,I,WAzDX,cAAoB,IAAPtB,EAAM,EAANA,IAAM,oBACjBE,KAAKC,UAAYH,E,4CAGnB,SAASuB,EAAOC,GACd,OAAOnB,MAAM,GAAD,OAAIH,KAAKC,UAAT,WAA6B,CACvCO,OAAQ,OACRJ,QAAS,CACP,eAAgB,oBAElBK,KAAMC,KAAKC,UAAU,CACnB,MAASU,EACT,SAAYC,MAGbjB,KAAKL,KAAKuB,mB,mBAGf,SAAOF,EAAOC,GACZ,OAAOnB,MAAM,GAAD,OAAIH,KAAKC,UAAT,WAA6B,CACvCO,OAAQ,OACRJ,QAAS,CACP,eAAgB,oBAElBK,KAAMC,KAAKC,UAAU,CACnB,MAASU,EACT,SAAYC,MAGfjB,KAAKL,KAAKuB,iBACVlB,MAAK,SAACO,GACL,GAAIA,EAAKb,MAEP,OADAyB,aAAaC,QAAQ,MAAOb,EAAKb,OAC1Ba,O,wBAKb,SAAWb,GACT,OAAOI,MAAM,GAAD,OAAIH,KAAKC,UAAT,aAA+B,CACzCO,OAAQ,MACRJ,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BL,MAG5BM,KAAKL,KAAKuB,mB,6BAGf,SAAgBjB,GACd,OAAKA,EAAIQ,GAGFR,EAAIS,OAFFC,QAAQC,OAAR,gDAA0BX,EAAIY,a,KAM9B,CAAU,CACrBpB,IAAK,kC,eC5BQ4B,MA9Bf,SAAetG,GAEb,MAAkD6D,mBAAS,CAAEoC,MAAO,GAAIC,SAAU,KAAlF,mBAAOK,EAAP,KAA0BC,EAA1B,KAEA,SAASC,EAAanD,GACpB,MAAwBA,EAAEa,OAAlBzC,EAAR,EAAQA,KAAM2B,EAAd,EAAcA,MACdmD,EAAqB,2BAAKD,GAAN,kBAA0B7E,EAAO2B,KAYvD,OACE,sBAAKzD,UAAU,QAAf,UACE,oBAAIA,UAAU,eAAd,sCACA,uBAAMA,UAAU,cAAc+C,SAZlC,SAAsBW,GACpBA,EAAEC,iBACF,IAAQ0C,EAAoBM,EAApBN,MAAOC,EAAaK,EAAbL,SACVD,GAAUC,GAGflG,EAAM0G,QAAQT,EAAOC,IAMnB,UACE,uBAAOtE,KAAK,QAAQhC,UAAU,kCAAkC+D,YAAY,QAAQjC,KAAK,QAAQ2B,MAAOkD,EAAkBN,MAAO/B,SAAUuC,EAAc/C,UAAQ,IACjK,uBAAO9B,KAAK,WAAWhC,UAAU,qCAAqC8B,KAAK,WAAWiC,YAAY,uCAASN,MAAOkD,EAAkBL,SAAUhC,SAAUuC,EAAc/C,UAAQ,IAC9K,wBAAQ9B,KAAK,SAAShC,UAAU,gBAAhC,mDCkBO+G,MAzCf,SAAkB3G,GAEd,MAAgD6D,mBAAS,CAAEoC,MAAO,GAAIC,SAAU,KAAhF,mBAAOU,EAAP,KAAyBC,EAAzB,KAEA,SAASJ,EAAanD,GAClB,MAAwBA,EAAEa,OAAlBzC,EAAR,EAAQA,KAAM2B,EAAd,EAAcA,MACdwD,EAAoB,2BAAKD,GAAN,kBAAyBlF,EAAO2B,KASvD,OACI,sBAAKzD,UAAU,QAAf,UACI,oBAAIA,UAAU,eAAd,gFACA,uBAAMA,UAAU,cAAc+C,SATtC,SAAsBW,GAClBA,EAAEC,iBACF,IAAQ0C,EAAoBW,EAApBX,MAAOC,EAAaU,EAAbV,SACflG,EAAM8G,WAAWb,EAAOC,IAMpB,UACI,uBAAOtE,KAAK,QACRF,KAAK,QACL9B,UAAU,kCACV+D,YAAY,QAAQO,SAAUuC,EAC9BpD,MAAOuD,EAAiBX,MACxBvC,UAAQ,IACZ,uBAAO9B,KAAK,WACRF,KAAK,WACL9B,UAAU,qCACV+D,YAAY,uCAASO,SAAUuC,EAC/BpD,MAAOuD,EAAiBV,SACxBxC,UAAQ,IACZ,wBAAQ9D,UAAU,gBAAlB,6HAEJ,sBAAKA,UAAU,iBAAf,UACI,qJACA,cAAC,IAAD,CAAMK,GAAG,WAAT,mD,wBCzBD8G,EAVQ,SAAC,GAAwC,IAA3BC,EAA0B,EAArCC,UAAyBjH,EAAY,iBAC7D,OACE,cAAC,IAAD,UACG,kBACCA,EAAMkH,WAAa,cAACF,EAAD,eAAehH,IAAY,cAAC,IAAD,CAAUC,GAAG,kBCPpD,MAA0B,oCCA1B,MAA0B,kCCoB1BkH,MAhBf,SAAqBnH,GACjB,OACI,qBAAKJ,UAAS,gBAAWI,EAAM0C,OAAS,eAAiB,IAAzD,SACI,sBAAK9C,UAAU,sCAAf,UACI,sBAAKA,UAAU,gBAAf,UACI,qBAAK2B,IAAKvB,EAAMoH,UAAYC,EAAUC,EAAO7F,IAAKzB,EAAMoH,UAAY,6CAAY,mDAAYxH,UAAU,iBACtG,qBAAKA,UAAU,cAAf,SACI,4BAAII,EAAMoH,UAAY,wKAAmC,6MAGjE,wBAAQxH,UAAU,kDAAkDgC,KAAK,SAAS,aAAW,6CAAUvB,QAASL,EAAM+C,gBC6MvHwE,MA1Mf,WACE,MAA4D/G,IAAMqD,UAAS,GAA3E,mBAAO2D,EAAP,KAA+BC,EAA/B,KACA,EAAsDjH,IAAMqD,UAAS,GAArE,mBAAO6D,EAAP,KAA4BC,EAA5B,KACA,EAA0DnH,IAAMqD,UAAS,GAAzE,mBAAO+D,EAAP,KAA8BC,EAA9B,KACA,EAA8CrH,IAAMqD,UAAS,GAA7D,mBAAOiE,EAAP,KAAyBC,EAAzB,KACA,EAAwCvH,IAAMqD,SAAS,IAAvD,mBAAOmE,EAAP,KAAqBC,EAArB,KACA,EAAsCzH,IAAMqD,SAAS,IAArD,mBAAOlD,EAAP,KAAoBuH,EAApB,KACA,EAA0B1H,IAAMqD,SAAS,IAAzC,mBAAO7B,EAAP,KAAcmG,EAAd,KACA,EAAgE3H,IAAMqD,UAAS,GAA/E,mBAAOuE,EAAP,KAAiCC,EAAjC,KACA,EAA0C7H,IAAMqD,UAAS,GAAzD,mBAAOyE,EAAP,KAAsBC,GAAtB,KACMC,GAAUC,cAgFhB,SAASC,KACPjB,GAA0B,GAC1BE,GAAuB,GACvBE,GAAyB,GACzBE,GAAkB,GAClBQ,IAAiB,GAnFnB/H,IAAM2C,WAAU,WACd,IAAMwF,EAAW,CAAClE,EAAImE,UAAWnE,EAAIoE,mBAErCjD,QAAQkD,IAAIH,GACT1D,MAAK,YAA+B,IAAD,mBAA5B8D,EAA4B,KAAlBC,EAAkB,KAClCd,EAAea,GACfZ,EAASa,MAEVC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAR,gDAAuBF,EAAIpD,cAC5C,IA6EHtF,IAAM2C,WAAU,WACd,IAAMkG,EAAgB,SAAC/F,GACP,WAAVA,EAAEgG,KACJZ,MAIJ,OADAa,SAASC,iBAAiB,UAAWH,GAC9B,kBAAME,SAASE,oBAAoB,UAAWJ,MACpD,IAYH,OAAkC7I,IAAMqD,SAAS,IAAjD,qBAAOzD,GAAP,MAAkBsJ,GAAlB,MAEAlJ,IAAM2C,WAAU,WACd,IAAMwB,EAAQyB,aAAauD,QAAQ,OACrB,OAAVhF,GACJiF,GAAajF,KACZ,IAGH,OAAoCnE,IAAMqD,UAAS,GAAnD,qBAAOqD,GAAP,MAAmB2C,GAAnB,MAEA,SAASD,GAAajF,GACpBqB,EAAK8D,WAAWnF,GACbM,MAAK,SAAAC,GACJ2E,GAA0B,MAAZ3E,EAAIM,MAClBkE,GAAaxE,EAAIM,KAAKS,OACtBuC,GAAQuB,KAAK,QAEdd,OAAM,SAACC,GACNC,QAAQC,IAAR,gDAAuBF,EAAIpD,YAoBjC,OACE,cAACvF,EAAmByJ,SAApB,CAA6B3G,MAAO1C,EAApC,SACE,sBAAKf,UAAU,OAAf,UACE,cAAC,EAAD,CAAQQ,UAAWA,GAAWE,UARpC,WACE8F,aAAa6D,WAAW,OACxBJ,IAAc,MAOV,eAAC,IAAD,WACE,cAAC,IAAD,CAAO3J,KAAK,WAAZ,SACE,cAAC,EAAD,CAAU4G,WAvDpB,SAAoBb,EAAOC,GACzBF,EAAKkE,SAASjE,EAAOC,GAClBjB,MAAK,WACJoD,GAA4B,GAC5BG,GAAQuB,KAAK,eAEdd,OAAM,kBAAMZ,GAA4B,MACxC8B,SAAQ,kBAAM5B,IAAiB,WAkD5B,cAAC,IAAD,CAAOrI,KAAK,WAAZ,SACE,cAAC,EAAD,CAAOwG,QAzBjB,SAAiBT,EAAOC,GACtBF,EAAKoE,MAAMnE,EAAOC,GACfjB,MAAK,WACJ4E,IAAc,GACdrB,GAAQuB,KAAK,QAEdd,OAAM,SAAC3B,GACN6B,QAAQC,IAAI9B,OAkBiBsC,aAAcA,OAEzC,cAAC,EAAD,CAAgBzJ,OAAK,EAACD,KAAK,IACzBgH,WAAYA,GACZD,UAAWlF,EACXE,cAzFV,WACEwF,GAA0B,IAyFlBvF,WAtFV,WACEyF,GAAuB,IAsFfxF,aA/FV,WACE0F,GAAyB,IA+FjBzF,YArGV,SAAyBtB,GACvBmH,EAAgBnH,GAChBiH,GAAkB,IAoGVlG,WAxJV,SAAwBf,GACtB,IAAMI,EAAUJ,EAAKK,MAAMC,MAAK,SAACiJ,GAAD,OAAUA,EAAKrJ,MAAQL,EAAYK,OACnEyD,EACG6F,qBAAqBxJ,EAAKE,KAAME,GAChC+D,MAAK,SAACsF,GACLpC,GAAS,SAACqC,GAAD,OAAcA,EAASjI,KAAI,SAACkI,GAAD,OAAQA,EAAEzJ,MAAQF,EAAKE,IAAMuJ,EAAUE,WAE5ExB,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAR,gDAAuBF,EAAIpD,aAkJrCnE,aA/IV,SAA0Bb,GACxB2D,EACGiG,WAAW5J,EAAKE,KAChBiE,MAAK,SAACC,GACLiD,GAAS,kBAAMnG,EAAM2I,QAAO,SAACF,GAAD,OAAOA,EAAEzJ,MAAQF,EAAKE,aAEnDiI,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAR,gDAAuBF,EAAIpD,aA0IrC9D,MAAOA,OAEX,cAACrC,EAAD,IACA,cAAC,EAAD,CACE+C,OAAQ8E,EACRzE,QAAS2F,GACTzE,WA7IR,SAA2BuB,GACzBf,EACGmG,QAAQpF,GACRP,MAAK,SAACC,GACLgD,EAAehD,GACfwD,QAEDO,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAR,gDAAuBF,EAAIpD,eAwIzC,cAAC,EAAD,CACEpD,OAAQgF,EACR3E,QAAS2F,GACTxG,WA9HR,SAA8BR,EAAMF,GAClCiD,EACGoG,WAAWnJ,EAAMF,GACjByD,MAAK,SAACC,GACLiD,EAAS,CAACjD,GAAF,mBAAUlD,KAClB0G,QAEDO,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAR,gDAAuBF,EAAIpD,eAyHzC,cAAC,EAAD,CACEpD,OAAQkF,EACR7E,QAAS2F,GACTvG,aA7IR,SAA4B2I,GAC1BrG,EACGsG,UAAUD,GACV7F,MAAK,SAACC,GACLgD,EAAehD,GACfwD,QAEDO,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAR,gDAAuBF,EAAIpD,eAwIzC,cAACtB,EAAD,CAAY1D,KAAMkH,EAAcjF,QAAS2F,GAAgBhG,OAAQoF,IACjE,cAAC,EAAD,CAAapF,OAAQ4F,EAAelB,UAAWgB,EAA0BrF,QAAS2F,WCzM3EsC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBjG,MAAK,YAAkD,IAA/CkG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACA,cAAC,EAAD,QAGFnC,SAASoC,eAAe,SAM1BX,M","file":"static/js/main.faf1baea.chunk.js","sourcesContent":["export default function Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">&copy; {`${new Date().getFullYear()} Mesto Russia`}</p>\n        </footer>\n    )\n}","import React from 'react';\nimport { Route, Switch, Link } from 'react-router-dom';\n\n\nfunction Header(props) {   \n\n    return (\n        <header className=\"header\">\n            <Link className=\"header__logo\" to=\"/\"></Link>\n            <div className=\"header__menu\">\n                <Switch>\n                    <Route path=\"/sign-up\"><Link className=\"header__item\" to=\"/sign-in\">Вход</Link></Route>\n                    <Route path=\"/sign-in\"><Link className=\"header__item\" to=\"/sign-up\">Регистрация</Link></Route>\n                    <Route exact path=\"/\">\n                        <p className=\"header__email\">{props.userEmail}</p>\n                        <button className=\"header__item\" onClick={props.onSignOut}>Выйти</button>\n                    </Route>\n                </Switch>\n            </div>\n        </header>\n    )\n}\n\nexport default Header;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = props.card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = `place__delete-button ${\n    isOwn ? 'place__delete-button' : 'place__delete-button_hidden'\n  }`;\n  const isLiked = props.card.likes.some((i) => i._id === currentUser._id);\n  const cardLikeButtonClassName = `place__like ${\n    isLiked ? 'place__like_status_enabled' : 'place__like'\n  }`;\n\n  function handleCardClick() {\n    props.onClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <li className=\"place\">\n      <img onClick={handleCardClick} src={props.card.link} className=\"place__image\" alt={props.card.name} />\n      <button onClick={handleDeleteClick} className={cardDeleteButtonClassName} type=\"button\"></button>\n      <div className=\"place__text\">\n        <h2 className=\"place__name\">{props.card.name}</h2>\n        <div className=\"plase__likes\">\n          <button onClick={handleLikeClick} className={cardLikeButtonClassName} type=\"button\"></button>\n          <span className=\"place__like-meter\">{props.card.likes.length}</span>\n        </div>\n      </div>  \n    </li>\n  );\n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nexport default function Main({cards, onEditProfile, onAddPlace, onEditAvatar, onCardClick, onCardLike, onCardDelete}) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n        \n            <section className=\"profile\">\n            <div className=\"profile__description\">\n                <div className=\"profile__avatar-box\">\n                <button onClick={onEditAvatar} className=\"profile__avatar-edit-button\"><img src={currentUser.avatar} className=\"profile__avatar\" alt=\"Аватар\" /></button>\n                </div>\n                <div className=\"profile__info\">\n                <div className=\"profile__name-button\">\n                    <h1 className=\"profile__name\">{currentUser.name}</h1>\n                    <button onClick={onEditProfile} className=\"profile__edit-button\" type=\"button\"></button>\n                </div>\n                <p className=\"profile__job\">{currentUser.about}</p>\n                </div>\n            </div>\n            <button onClick={onAddPlace} className=\"profile__add-button\" type=\"button\"></button>\n            </section>\n\n            <section className=\"places\">\n            <ul className=\"places__list\">\n            {cards.map((item) => (\n                <Card \n                    key={item._id} \n                    card={item} \n                    onClick={onCardClick}\n                    onCardLike={onCardLike}\n                    onCardDelete={onCardDelete} />\n            ))}\n            </ul>\n            </section>  \n\n        </main>\n    )\n}\n","export default function PopupWithForm(props) {\n    return (\n        <div className={`popup popup_type_${props.name} ${props.isOpen && \"popup_opened\"}`}>\n            <div className=\"popup__container\">\n            <form name={props.name} className=\"popup__form form\" onSubmit={props.onSubmit}>\n                <h3 className=\"popup__title\">{props.title}</h3>\n                {props.children}\n                <button type=\"submit\" className=\"popup__save-button popup__submit\">{props.buttonName}</button>\n            </form>\n            <button onClick={props.onClose} type=\"button\" className=\"popup__close-button\"></button>\n            </div>\n        </div>\n    )\n}\n\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onEditAvatar(avatarRef.current.value);\n  }\n\n  React.useEffect(() => {\n    avatarRef.current.value = ''\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name={'avatar'}\n      title={'Обновить аватар'}\n      buttonName={'Сохранить'}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={avatarRef}\n        type='url'\n        name='inputAvatarLink'\n        id='avatar-link-input'\n        required\n        placeholder='Ссылка на картинку'\n        className='popup__input popup__input_data_avatar-link'\n      />\n      <span className='popup__input-error avatar-link-input-error'></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  function handleSetName(e) {\n    setName(e.target.value);\n  }\n\n  function handleSetDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onEditUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name={'edit'}\n      title={'Редактировать профиль'}\n      buttonName={'Сохранить'}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        onChange={handleSetName}\n        value={name || ''}\n        type='text'\n        name='inputName'\n        id='name-input'\n        required\n        minLength='2'\n        maxLength='40'\n        placeholder='Имя'\n        className='popup__input'\n      />\n      <span className='popup__input-error name-input-error'></span>\n      <input\n        onChange={handleSetDescription}\n        value={description || ''}\n        type='text'\n        name='inputJob'\n        id='job-input'\n        required\n        minLength='2'\n        maxLength='200'\n        placeholder='Вид деятельности'\n        className='popup__input'\n      />\n      <span className='popup__input-error job-input-error'></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleSetName(e) {\n    setName(e.target.value);\n  }\n\n  function handleSetLink(e) {\n    setLink(e.target.value);\n  }\n  \n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace(name, link);\n  }\n\n  React.useEffect(() => {\n    setName('');\n    setLink('');\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name={'add'}\n      title={'Новое место'}\n      buttonName={'Cохранить'}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        onChange={handleSetName}\n        value={name || ''}\n        type='text'\n        name='inputPlace'\n        id='place-input'\n        minLength='2'\n        maxLength='30'\n        required\n        placeholder='Название'\n        className='popup__input popup__input_data_place'\n      />\n      <span className='popup__input-error'></span>\n      <input\n        onChange={handleSetLink}\n        value={link || ''}\n        type='url'\n        name='inputLink'\n        id='link-input'\n        required\n        placeholder='Ссылка на картинку'\n        className='popup__input popup__input_data_link'\n      />\n      <span className='popup__input-error'></span>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;","export default function ImagePopup(props) {\n    return (\n        <div className={`popup popup_type_${props.name} ${props.isOpen && \"popup_opened\"}`} id=\"popupImage\">\n            <div className=\"popup__container\">\n            <figure className=\"popup__image-container\">\n                <img className=\"popup__image\" alt={props.card.name} src={props.card.link} />\n                <figcaption className=\"popup__image-caption\">{props.card.name}</figcaption>\n            </figure>\n            <button onClick={props.onClose} type=\"button\" className=\"popup__close-button\" id=\"closeImageButton\"></button>\n            </div>\n        </div>\n    )\n}","class Api {\n\n  constructor({url, token}) {\n    this._base_url = url;\n    this._token = token;\n  }\n\n  getInitialCards() {\n    return fetch(`${this._base_url}/cards`, {\n      headers: this._token,\n    })\n    .then((res) => this._check(res))\n  }\n\n  addNewCard(name, link) {\n    return fetch(`${this._base_url}/cards`, {\n      method: 'POST',\n      headers: this._token,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then(this._check)\n  }\n\n  deleteCard(_id) {\n    return fetch(`${this._base_url}/cards/${_id}`, {\n      method: 'DELETE',\n      headers: this._token\n    })\n    .then(this._check)\n  }\n\n  getInfo() {\n    return fetch(`${this._base_url}/users/me`, {\n      method: 'GET',\n      headers: this._token\n    })\n    .then(this._check)\n  }\n\n  setInfo(data) {\n    return fetch(`${this._base_url}/users/me`, {\n      method: 'PATCH',\n      headers: this._token,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n    .then(this._check)\n  }\n\n  setAvatar(link) {\n    return fetch(`${this._base_url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._token,\n      body: JSON.stringify({\n        avatar: link\n      })\n    })\n    .then(this._check)\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return fetch(`${this._base_url}/cards/likes/${cardId}`, {\n      method: isLiked ? 'PUT' : 'DELETE',\n      headers: this._token,\n    })\n    .then(this._check)\n  }\n  \n  _check(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n}\n\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-25',\n  token: {\n    authorization: '279ec5ff-9344-4c5f-b9ff-6ef489a3fe7d',\n    'Content-Type': 'application/json'\n},});\n\nexport default api;","class Auth {\n\n  constructor({url}) {\n    this._base_url = url;\n  }\n\n  register(email, password) {\n    return fetch(`${this._base_url}/signup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'email': email,\n        'password': password\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  login (email, password) {\n    return fetch(`${this._base_url}/signin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'email': email,\n        'password': password\n      })\n    })\n    .then(this._handleResponse)\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        return data;\n      }\n    })    \n  }\n\n  checkToken(token) {\n    return fetch(`${this._base_url}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      }\n    })\n      .then(this._handleResponse);\n  }\n\n  _handleResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n}\n\nconst auth = new Auth ({\n  url: 'https://auth.nomoreparties.co'\n})\n\nexport default auth;","import React, { useState } from 'react';\n\nfunction Login(props) {\n\n  const [userAuthorisation, setUserAuthorisation] = useState({ email: '', password: ''});  \n  \n  function handleChange(e) {\n    const { name, value } = e.target;\n    setUserAuthorisation({ ...userAuthorisation, [name]: value })\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const { email, password } = userAuthorisation\n    if (!email || !password) {\n      return;\n    }\n    props.onLogin(email, password)\n  }\n\n  return (\n    <div className=\"login\">\n      <h2 className=\"login__title\">Вход</h2>\n      <form className=\"login__form\" onSubmit={handleSubmit}>\n        <input type=\"email\" className=\"login__input login__input_email\" placeholder=\"Email\" name=\"email\" value={userAuthorisation.email} onChange={handleChange} required></input>\n        <input type=\"password\" className=\"login__input login__input_password\" name=\"password\" placeholder=\"Пароль\" value={userAuthorisation.password} onChange={handleChange} required></input>\n        <button type=\"submit\" className=\"login__button\">Войти</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Login;","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n\n    const [userRegistration, setUserRegistration] = useState({ email: \"\", password: \"\" });\n\n    function handleChange(e) {\n        const { name, value } = e.target\n        setUserRegistration({ ...userRegistration, [name]: value })\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault()\n        const { email, password } = userRegistration\n        props.onRegister(email, password)\n    }\n\n    return (\n        <div className=\"login\">\n            <h2 className=\"login__title\">Регистрация</h2>\n            <form className=\"login__form\" onSubmit={handleSubmit}>\n                <input type=\"email\"\n                    name=\"email\"\n                    className=\"login__input login__input_email\"\n                    placeholder=\"Email\" onChange={handleChange}\n                    value={userRegistration.email}\n                    required></input>\n                <input type=\"password\"\n                    name=\"password\"\n                    className=\"login__input login__input_password\"\n                    placeholder=\"Пароль\" onChange={handleChange}\n                    value={userRegistration.password}\n                    required></input>\n                <button className=\"login__button\">Зарегистрироваться</button>\n            </form>\n            <div className=\"login__sign-in\">\n                <p>Уже зарегистрированы?</p>\n                <Link to=\"/sign-in\">Войти</Link>\n            </div>\n        </div>\n    )\n}\n\nexport default Register;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import React from 'react';\nimport success from '../images/success.svg';\nimport error from '../images/error.svg';\n\nfunction InfoTooltip(props) {\n    return (\n        <div className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__container popup__infotooltip\">\n                <div className=\"popup__result\">\n                    <img src={props.isSuccess ? success : error} alt={props.isSuccess ? 'Успешно' : 'Неудачно'} className=\"popup__image\" />\n                    <div className=\"popup__text\">\n                        <p>{props.isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</p>\n                    </div>\n                </div>\n                <button className=\"popup__close-button popup__close-tooltip-button\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose} ></button>\n            </div>\n        </div>\n    )\n}\n\nexport default InfoTooltip","import React from \"react\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport auth from '../utils/auth';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isRegistrationSuccessful, setIsRegistrationSuccessful] = React.useState(true);\n  const [isTooltipOpen, setIsTooltipOpen] = React.useState(false);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    const promises = [api.getInfo(), api.getInitialCards()];\n\n    Promise.all(promises)\n      .then(([userData, initialCards]) => {\n        setCurrentUser(userData);\n        setCards(initialCards);\n      })\n      .catch((err) => console.log(`Ошибка: ${err.status}`));\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((like) => like._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((cardList) => cardList.map((c) => (c._id === card._id ? newCard : c)));\n      })\n      .catch((err) => console.log(`Ошибка: ${err.status}`));\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then((res) => {\n        setCards(() => cards.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => console.log(`Ошибка: ${err.status}`));\n  }\n\n  function handleUpdateUser( data ) {\n    api\n      .setInfo(data)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`Ошибка: ${err.status}`));\n  }\n\n  function handleUpdateAvatar(avatarLink) {\n    api\n      .setAvatar(avatarLink)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`Ошибка: ${err.status}`));\n  }\n\n  function handleAddPlaceSubmit(name, link) {\n    api\n      .addNewCard(name, link)\n      .then((res) => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`Ошибка: ${err.status}`));\n  }\n\n    \n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setImagePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n  \n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n  \n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setImagePopupOpen(false);\n    setIsTooltipOpen(false);\n  }\n\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keydown', closeByEscape)\n    return () => document.removeEventListener('keydown', closeByEscape)\n  }, [])\n\n  function onRegister(email, password) {\n    auth.register(email, password)\n      .then(() => {\n        setIsRegistrationSuccessful(true);\n        history.push('/sign-in');\n      })\n      .catch(() => setIsRegistrationSuccessful(false))\n      .finally(() => setIsTooltipOpen(true));\n  }\n  \n  const [userEmail, setUserEmail] = React.useState('');\n  \n  React.useEffect(() => {\n    const token = localStorage.getItem('jwt')\n    if (token === null) { return }\n    onTokenCheck(token)\n  }, []\n  );\n\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n\n  function onTokenCheck(token) { \n    auth.checkToken(token)\n      .then(res => {\n        setIsLoggedIn(res.data != null);\n        setUserEmail(res.data.email);\n        history.push('/');\n      })\n      .catch((err) => {\n        console.log(`Ошибка: ${err.status}`);\n      })\n  }\n\n  function onLogin(email, password) {\n    auth.login(email, password)\n      .then(() => {\n        setIsLoggedIn(true);\n        history.push('/');\n      })\n      .catch((error) => {\n        console.log(error);\n      })    \n  }  \n\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    setIsLoggedIn(false)\n  } \n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header userEmail={userEmail} onSignOut={handleSignOut} />\n        <Switch>\n          <Route path='/sign-up'>\n            <Register onRegister={onRegister} />\n          </Route>\n          <Route path='/sign-in'>\n            <Login onLogin={onLogin} onTokenCheck={onTokenCheck} />\n          </Route>\n          <ProtectedRoute exact path=\"/\"\n            isLoggedIn={isLoggedIn}\n            component={Main}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            cards={cards} />\n        </Switch>\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onEditUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onEditAvatar={handleUpdateAvatar}\n        />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} isOpen={isImagePopupOpen}/>\n        <InfoTooltip isOpen={isTooltipOpen} isSuccess={isRegistrationSuccessful} onClose={closeAllPopups} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}